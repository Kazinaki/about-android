- [Назад](/./java.md)

## Equals и HashCode

При реализации метода `equals` надо, чтобы он соотвествовал *отношению эквивалентности*:

1. **Рефлексивность**. Для любой ненулевой ссылки `x.equals(x) == true`
1. **Симметричность**. Для любых ненулевых ссылок `x` и `y`, если `x.equals(y) == true`, то и `y.equals(x) == true`.
1. **Транзитивность**. Для любых ненулевых ссылок `x`, `y` и `z`, если `x.equals(z) == true` и `y.equals(z) == true`, то и `x.equals(y) == true`.
1. **Непротиворечивость**. Для любых ненулевых ссылок `x` и `y`, значение `x.equals(y)` должно всегда возвращать то же значение, если информация в `x` и `y`, использующаяся для сравнения, не изменялась.
1. Если `x` не нулевая ссылка, то `x.equals(null) == false`.

**Важно**

Переопределяя метод `equals` всегда надо переопределять `hashCode`.

Контракт методов `equals` и `hashCode`:

1. Если во время работы несколько раз вызывать метод `hashCode` у одного объекта, и при этом информация, которая учавствует в `equals` не изменилась, то `hashCode` должен возвращать одно и то же число. Если приложение остановить и перезапустить оно может измениться.
1. Если `equals` возвращает `true` для двух объектов, то и `hashCode` должен возвращать одинаковое число для них.
1. Обратное не обязательно: если `equals` возвращает `false` для двух объектов, то `hashCode` может возвращать одинаковое число для них. Однако, это снижает эффективность хэш-таблиц.
