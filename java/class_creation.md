- [Назад](/./java.md)

## Как происходит создание объектов

Java – язык с отложенной загрузкой кода. Первоначально загружается только один класс – тот, который передан в качестве параметра утилите `java`. Как только код этого класса обращается к какому-то другому классу (любым способом: вызовом конструктора, обращением к статическому методу или полю), загружается другой класс. По мере выполнения кода, загружаются всё новые и новые классы. Ни один класс не загружается до тех пор, пока в нем не возникнет реальная потребность. Такое поведение заложено в стандартный системный загрузчик ([ClassLoader](/java/classloader.md)).

Вот как в Java класс загружается ClassLoader-ом.

1. Выделяется память в куче для экземпляра, получается ссылка на этот экземпляр;
1. Выполняются инициализации нестатических полей и блоков инициализации в опрядке объявления;
1. Вызывается конструктор.


Запустим простейшее приложениие с ключем -verbose:class.

  ```java
    public class A { }

    public class B extends A { }

    public class C extends B { }

    public class Main {
      
      public static void main(String args[]) {
        C c = new C();
        B b = new B();
        A a = new A();
      }
    }

  ```

Вывод показывает, что классы были загружены не в том порядке в котором были использованы. Это обусловлено наследованием.

>Loaded Main from file:/C:/devel/CL/bin/
>
>Loaded A from file:/C:/devel/CL/bin/]
>
>Loaded B from file:/C:/devel/CL/bin/]
>
>Loaded C from file:/C:/devel/CL/bin/]
